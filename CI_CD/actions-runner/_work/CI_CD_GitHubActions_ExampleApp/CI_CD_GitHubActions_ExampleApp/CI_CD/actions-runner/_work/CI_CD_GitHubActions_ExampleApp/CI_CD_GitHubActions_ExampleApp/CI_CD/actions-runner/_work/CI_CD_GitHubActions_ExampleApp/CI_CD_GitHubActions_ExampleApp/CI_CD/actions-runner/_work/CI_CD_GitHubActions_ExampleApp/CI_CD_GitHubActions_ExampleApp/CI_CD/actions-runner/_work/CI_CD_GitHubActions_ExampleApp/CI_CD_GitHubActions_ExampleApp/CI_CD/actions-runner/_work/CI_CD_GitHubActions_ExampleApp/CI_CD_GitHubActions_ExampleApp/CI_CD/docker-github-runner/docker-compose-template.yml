version: '2.3'

services:
  github-runner-#APPNAME:
    build:
      context: .
    image: github-runner:0.0.1
    environment:
      APP_NAME: "#APPNAME"
      ACTIONS_INSTALLER_URL: "#ACTIONSINSTALLERURL"
      GIT_REPO_URL: "#GITREPOURL"
      GIT_RUNNER_TOKEN: "#GITRUNNERTOKEN"
    security_opt:
      # needed on SELinux systems to allow docker container to manage other docker containers
      - label:disable
    volumes:
      - '/var/run/docker.sock:/var/run/docker.sock'
      - './runner-#APPNAME:/tmp/runner'

